#!/usr/bin/env python

import sys, os


# pygtk imports
import pygtk
pygtk.require('2.0')
import gtk

# determine base dir from program path
basedir = os.path.dirname(os.path.realpath(sys.argv[0]))


# look for images directory
if not os.path.isdir(os.path.join(basedir, "images")):
    # if no images dir try one directory up
    basedir = os.path.split(basedir)[0]

try:
    # try to import from python path first
    import takenote
    
except ImportError:
    # try to infer takenote lib path from program path
    
    sys.path.append(basedir)
    import takenote
    
import takenote.gui.main_window



#=============================================================================

def main():
    gtk.main()


if __name__ == "__main__":
    app = takenote.gui.TakeNote(basedir)
    
    if len(sys.argv) > 1:
        app.open_notebook(sys.argv[1].rstrip("/"))
        
    elif app.pref.default_notebook != "":
        # open default notebook
        app.open_notebook(app.pref.default_notebook)
    
    main()

